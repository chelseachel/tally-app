(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0192":function(t,e,n){"use strict";var i=n("354e"),s=n.n(i);s.a},"06cf2":function(t,e,n){},"0a5c":function(t,e,n){},"129e":function(t,e,n){"use strict";var i=n("4b94"),s=n.n(i);s.a},1377:function(t,e,n){"use strict";var i=n("811d"),s=n.n(i);s.a},2825:function(t,e,n){"use strict";var i=n("5c26"),s=n.n(i);s.a},"2ee3":function(t,e,n){},"354e":function(t,e,n){},"3daf":function(t,e,n){"use strict";var i=n("5868"),s=n.n(i);s.a},"3db4":function(t,e,n){},"40f2":function(t,e,n){"use strict";var i=n("557d"),s=n.n(i);s.a},"4b94":function(t,e,n){},5414:function(t,e,n){},"557d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:t.transitionName,mode:"out-in"}},[n("keep-alive",{attrs:{include:"Home"}},[n("router-view",{key:t.$route.path})],1)],1)],1)},a=[],o=(n("ac1f"),n("1276"),{name:"App",data:function(){return{transitionName:"into"}},watch:{$route:function(t,e){var n=t.path.split("/").length,i=e.path.split("/").length;this.transitionName=n>i?"into":"outof"}}}),r=o,c=(n("66b6"),n("2877")),l=Object(c["a"])(r,s,a,!1,null,"73f37086",null),u=l.exports,h=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"title",style:t.showFixed?{position:"sticky"}:{position:"relative"}},[t._m(0)]),n("home-grid",{attrs:{lists:t.lists}}),n("transition",{attrs:{name:"fade"}},[t.showFixed?n("div",{staticClass:"iconfont iconadd3",class:{rotate:t.rotateIcon},on:{click:t.handleAddClick}}):t._e()]),n("transition",{attrs:{name:"fade"}},[t.showNew?n("edit-list-name",{on:{close:t.handleCloseNew,"save-name":t.handleSaveNew}}):t._e()],1)],1)},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Tally "),n("span",[t._v("Lists")])])}],f=n("5530"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("ul",{staticClass:"wrapper"},t._l(t.lists,(function(e,i){return n("router-link",{key:i,staticClass:"grid",attrs:{replace:"",tag:"li",to:"/list/"+i},nativeOn:{click:function(e){return t.handleStoreIndex(i)}}},[n("p",{staticClass:"grid-title"},[t._v(t._s(e.name))]),n("p",{staticClass:"grid-item"},[t._v(t._s(e.content.length)+" ITEMS")])])})),1),n("span",{staticClass:"underline"})])},v=[],w={name:"HomeGrid",props:{lists:Array},methods:{handleStoreIndex:function(t){this.$store.commit("changeIndex",t)}}},C=w,b=(n("129e"),Object(c["a"])(C,p,v,!1,null,"7751a547",null)),g=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",on:{click:t.handleCloseClick}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.listName,expression:"listName"}],ref:"input",staticClass:"list-name",domProps:{value:t.listName},on:{blur:function(e){return e.preventDefault(),t.inputLoseFocus(e)},input:function(e){e.target.composing||(t.listName=e.target.value)}}}),n("button",{on:{click:t.handleSaveClick}},[t._v("SAVE")])])},x=[],k=(n("b0c0"),{name:"EditListName",props:{name:String},data:function(){return{listName:this.name||""}},methods:{handleCloseClick:function(t){"container"===t.target.className&&this.$emit("close")},handleSaveClick:function(){this.$emit("save-name",this.listName)},inputLoseFocus:function(){window.scrollTo({top:window.pageYOffset,behavior:"smooth"})}},mounted:function(){this.$nextTick((function(){this.$refs.input.focus()}),100)}}),y=k,E=(n("2825"),Object(c["a"])(y,_,x,!1,null,"f40a31d2",null)),N=E.exports,T=n("2f62"),S={name:"Home",components:{HomeGrid:g,EditListName:N},data:function(){return{showFixed:!1,showNew:!1,newlist:"",rotateIcon:!1}},methods:{handleAddClick:function(){this.showNew=!0,this.rotateIcon=!0},handleCloseNew:function(){this.showNew=!1,this.rotateIcon=!1},handleSaveNew:function(t){t&&this.lists.push({name:t,content:[]}),this.handleCloseNew()}},computed:Object(f["a"])({},Object(T["b"])(["lists"])),deactivated:function(){this.showFixed=!1},activated:function(){var t=this,e=setTimeout((function(){t.showFixed=!0,clearTimeout(e)}),200)}},I=S,$=(n("40f2"),Object(c["a"])(I,d,m,!1,null,"5ae9ea13",null)),O=$.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("tally-header",{on:{showmore:t.handleShowMore}}),n("tally-title",{attrs:{name:t.name,total:t.total}}),n("tally-list",{key:t.name+"list",attrs:{list:t.list,name:t.name}}),n("transition",{attrs:{name:"fade"}},[t.showFixed?n("div",{staticClass:"iconfont iconadd1",class:{rotate:t.rotateIcon},on:{click:t.handleAddClick}}):t._e()]),n("transition",{attrs:{name:"fade"}},[t.showEdit?n("edit-tally-item",{on:{close:t.handleCloseItem,"save-item":t.handleSaveItem}}):t._e()],1),n("transition",{attrs:{name:"fade"}},[t.showMore?n("edit-more-menu",{on:{close:t.handleCloseMore,"show-name":t.handleShowName,"delete-list":t.handleDeleteList}}):t._e()],1),n("transition",{attrs:{name:"fade"}},[t.showName?n("edit-list-name",{key:t.name,attrs:{name:t.name},on:{close:t.handleCloseName,"save-name":t.handleSaveName}}):t._e()],1)],1)},j=[],M=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("router-link",{staticClass:"iconfont iconmenu1",attrs:{replace:"",tag:"div",to:"/"}}),n("div",{staticClass:"iconfont iconswitch",on:{click:t.handleShowClick}})],1)}),P=[],X={name:"TallyHeader",methods:{handleShowClick:function(){this.$emit("showmore")}}},L=X,D=(n("581f"),Object(c["a"])(L,M,P,!1,null,"7fbd7fad",null)),A=D.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("div",{staticClass:"name"},[t._v(t._s(t.name))]),n("div",{staticClass:"total"},[t._v(t._s(t.showTotal)+" "),n("span",{staticClass:"desc"},[t._v("Total")])])])},W=[],Y=(n("a9e3"),n("b680"),{name:"TallyTitle",props:{name:String,total:Number},computed:{showTotal:function(){return"¥".concat(parseFloat(this.total).toFixed(2))}}}),J=Y,B=(n("6027"),Object(c["a"])(J,H,W,!1,null,"3b52a671",null)),R=B.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item-wrapper"},t._l(t.list,(function(e,i){return n("tally-item",{key:t.gernerateId(i),attrs:{item:e,name:t.name},on:{delete:function(e){return t.handleDeleteItem(i)}}})})),1)},G=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item-bg",style:{background:this.bgcolor}},[n("div",{staticClass:"item-drag",style:t.translateStyle,on:{touchstart:t.handleTouchStart,touchmove:t.handleTouchMove,touchend:t.handleTouchEnd,click:t.handleEditClick}},[n("div",{staticClass:"item-info"},[t._v(t._s(t.item.info))]),n("div",{staticClass:"item-price"},[t._v(t._s(t.showPrice))])]),n("span",{ref:"num",staticClass:"num"},[t._v(t._s(t.num))]),n("transition",{attrs:{name:"fade"}},[t.showEdit?n("edit-tally-item",{key:t.gernerateId(),attrs:{existItem:this.item.info,existPrice:parseFloat(this.item.price)},on:{close:t.handleCloseItem,"save-item":t.handleEditItem,delete:t.handleDeleteItem}}):t._e()],1)],1)},z=[],K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",on:{click:t.handleCloseClick}},[n("div",{staticClass:"edit-box"},[n("div",{staticClass:"edit"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.item,expression:"item"}],ref:"input",attrs:{type:"text",name:"item",placeholder:"Item"},domProps:{value:t.item},on:{input:function(e){e.target.composing||(t.item=e.target.value)}}})]),n("div",{staticClass:"edit"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"text",name:"price",placeholder:"Price"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrompt,expression:"showPrompt"}],staticClass:"prompt"},[t._v("请输入有效的内容")]),n("div",{staticClass:"button-wrapper"},[n("button",{staticClass:"remove",on:{click:t.handleRemoveClick}},[t._v("REMOVE")]),n("button",{staticClass:"save",on:{click:t.handleSaveClick}},[t._v("SAVE")])])])])},Q=[],U={name:"EditTallyItem",props:{existItem:String,existPrice:Number},data:function(){return{item:this.existItem||"",price:0===this.existPrice?0:this.existPrice||"",showPrompt:!1}},methods:{handleCloseClick:function(t){"container"===t.target.className&&(this.$emit("close"),this.inputLoseFocus())},handleRemoveClick:function(){this.$emit("delete"),this.$emit("close"),this.inputLoseFocus()},handleSaveClick:function(){isNaN(this.price)||0===this.item.length||0===this.price.length?this.showPrompt=!0:(this.showPrompt=!1,this.$emit("save-item",this.item,this.price),this.inputLoseFocus())},inputLoseFocus:function(){window.scrollTo({top:window.pageYOffset,behavior:"smooth"})}},mounted:function(){this.$nextTick((function(){this.$refs.input.focus()}),100)}},Z=U,tt=(n("713d"),Object(c["a"])(Z,K,Q,!1,null,"fa7818d8",null)),et=tt.exports,nt={name:"TallyItem",props:{item:Object,name:String},components:{EditTallyItem:et},data:function(){return{num:this.item.num,numWidth:0,touchStatus:!1,firstJudge:!0,startX:0,startY:0,transX:0,showEdit:!1,timer:null}},computed:{showPrice:function(){return"¥".concat(parseFloat(this.item.price).toFixed(2))},translateStyle:function(){return{transform:"translateX(".concat(this.transX,"px)"),transitionDuration:this.touchStatus?"0s":".2s"}},bgcolor:function(){var t;return this.num>=0&&(t="#FFCC62",this.num>=2&&(t="#FFA655",this.num>=4&&(t="#FF8951",this.num>=6&&(t="#FE7350",this.num>=8&&(t="#FF5551"))))),t}},methods:{getNumWidth:function(){if(this.$refs.num)return this.$refs.num.offsetWidth},handleTouchStart:function(t){this.touchStatus=!0,this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.lastNum=this.num,this.translateX="transform:translateX(0px)"},handleTouchMove:function(t){var e=this;this.firstJudge&&(this.touchStatus=!!this.judgeTouchDirX(t),this.firstJudge=!1),this.touchStatus&&(("boolean"!==typeof t.cancelable||t.cancelable)&&t.preventDefault(),this.timer||(this.timer=setTimeout((function(){var n=t.touches[0].clientX,i=n>40?n-e.startX:40-e.startX;if(e.transX=i,i<=0){var s=Math.floor(-i/30);e.num=s+e.lastNum}else i>=40&&(e.num=0,i>=e.numWidth&&(e.transX=e.numWidth));e.timer=null,clearTimeout(e.timer)}),16)))},handleTouchEnd:function(){var t=this,e=setTimeout((function(){t.touchStatus=!1,t.transX=0,t.firstJudge=!0,clearTimeout(e)}),18)},judgeTouchDirX:function(t){var e=t.touches[0].clientX,n=t.touches[0].clientY,i=e-this.startX,s=n-this.startY;return Math.abs(i)>=Math.abs(s)},handleEditClick:function(){this.showEdit=!0},handleCloseItem:function(){this.showEdit=!1},handleEditItem:function(t,e){this.item.info=t,this.item.price=e,this.showEdit=!1},handleDeleteItem:function(){this.showEdit=!1,this.$emit("delete")},gernerateId:function(){var t=this.item.info+this.name;return t}},mounted:function(){this.numWidth=this.getNumWidth()},updated:function(){this.item.num=this.num}},it=nt,st=(n("3daf"),Object(c["a"])(it,q,z,!1,null,"803fc872",null)),at=st.exports,ot={name:"TallyList",props:{list:Array,name:String},components:{TallyItem:at},methods:{handleDeleteItem:function(t){this.list.splice(t,1)},gernerateId:function(t){var e=this.name+t;return e}}},rt=ot,ct=(n("1377"),Object(c["a"])(rt,V,G,!1,null,"76865a95",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",on:{click:t.handleCloseClick}},[n("div",{staticClass:"more"},[n("div",{staticClass:"operate",on:{click:t.handleEditClick}},[n("span",{staticClass:"iconfont iconeditor"}),t._v(" Edit list name ")]),n("div",{staticClass:"operate",on:{click:t.handleDeleteClick}},[n("span",{staticClass:"iconfont icontrash"}),t._v(" Delete list ")])])])},ht=[],dt={name:"EditMoreMenu",methods:{handleCloseClick:function(t){"container"===t.target.className&&this.$emit("close")},handleEditClick:function(){this.$emit("show-name")},handleDeleteClick:function(){var t=confirm("确定删除整个清单吗？");!0===t&&this.$nextTick((function(){this.$emit("delete-list"),this.$router.push("/")}),200)}}},mt=dt,ft=(n("0192"),Object(c["a"])(mt,ut,ht,!1,null,"338d07e2",null)),pt=ft.exports,vt={name:"List",components:{TallyHeader:A,TallyTitle:R,TallyList:lt,EditTallyItem:et,EditMoreMenu:pt,EditListName:N},data:function(){return{showFixed:!1,showEdit:!1,showMore:!1,showName:!1,rotateIcon:!1}},methods:{handleAddClick:function(){this.showEdit=!0,this.rotateIcon=!0},handleCloseItem:function(){this.showEdit=!1,this.rotateIcon=!1},handleSaveItem:function(t,e){this.list.push({info:t,price:e,num:0}),this.handleCloseItem()},handleShowMore:function(){this.showMore=!0},handleCloseMore:function(){this.showMore=!1},handleShowName:function(){this.showMore=!1,this.showName=!0},handleSaveName:function(t){this.name=t,this.handleCloseName()},handleCloseName:function(){this.showName=!1},handleDeleteList:function(){this.lists.splice(this.index,1)}},computed:Object(f["a"])({},Object(T["b"])(["index","lists"]),{name:{get:function(){return this.lists[this.index].name},set:function(t){this.lists[this.index].name=t}},list:function(){return this.lists[this.index].content},total:function(){for(var t=0,e=0;e<this.list.length;e++)t+=this.list[e].price*this.list[e].num;return t}}),created:function(){this.showFixed=!1},mounted:function(){var t=this,e=setTimeout((function(){t.showFixed=!0,clearTimeout(e)}),200)}},wt=vt,Ct=(n("fa45"),Object(c["a"])(wt,F,j,!1,null,"7aa9df13",null)),bt=Ct.exports;i["a"].use(h["a"]);var gt=new h["a"]({routes:[{path:"/",name:"Home",component:O},{path:"/list/:id",name:"List",component:bt}],scrollBehavior:function(t,e,n){return{x:0,y:0}}});i["a"].use(T["a"]);var _t=new T["a"].Store({state:{index:0,lists:[{id:"001",name:"Meals",content:[{info:"Milk",price:5,num:1},{info:"Bread",price:6,num:3},{info:"Apple",price:3,num:5},{info:"Eggs",price:1,num:6}]},{id:"002",name:"Furniture",content:[{info:"Double Bed",price:5800,num:1},{info:"Armchair",price:1280,num:3},{info:"Bookshelf",price:345.68,num:5},{info:"Chair",price:599,num:6}]},{id:"003",name:"Travel",content:[{info:"Example",price:10,num:1}]},{id:"004",name:"Business",content:[{info:"Example",price:10,num:1}]},{id:"005",name:"操作指南",content:[{info:"向左拖动增加数量",price:0,num:1},{info:"向右拖动数量清零",price:0,num:3},{info:"点击编辑条目",price:0,num:5},{info:"右上角可编辑列表",price:0,num:6}]}]},mutations:{changeIndex:function(t,e){t.index=e}}});n("c8f4"),n("3db4"),n("5414");i["a"].config.productionTip=!1,new i["a"]({router:gt,store:_t,render:function(t){return t(u)}}).$mount("#app")},"581f":function(t,e,n){"use strict";var i=n("2ee3"),s=n.n(i);s.a},5868:function(t,e,n){},"5c26":function(t,e,n){},6027:function(t,e,n){"use strict";var i=n("c34d"),s=n.n(i);s.a},"66b6":function(t,e,n){"use strict";var i=n("06cf2"),s=n.n(i);s.a},"713d":function(t,e,n){"use strict";var i=n("7741"),s=n.n(i);s.a},7741:function(t,e,n){},"811d":function(t,e,n){},c34d:function(t,e,n){},c8f4:function(t,e,n){},fa45:function(t,e,n){"use strict";var i=n("0a5c"),s=n.n(i);s.a}});